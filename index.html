<!DOCTYPE html>
<html class="dark" lang="ja"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Critical Hit ! - 秘密基地・インテリジェンス</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700;900&amp;family=Space+Grotesk:wght@300;400;500;600;700&amp;family=DotGothic16&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#f4d125",
                        "rising-yellow": "#f4d125",
                        "new-blue": "#3b82f6",
                        "stable-white": "#f8fafc",
                        "background-dark": "#05070a",
                        "panel-dark": "#0c0e14",
                        "grid-line": "rgba(59, 130, 246, 0.05)"
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "Noto Sans JP", "sans-serif"],
                        "sans": ["Noto Sans JP", "sans-serif"],
                        "pixel": ["DotGothic16", "monospace"]
                    },
                    borderRadius: {"DEFAULT": "0px", "lg": "0px", "xl": "0px", "full": "9999px"},
                },
            },
        }
    </script>
<style type="text/tailwindcss">
        @layer base {
            body {
                @apply font-sans bg-background-dark text-slate-100;
                background-image: 
                    linear-gradient(var(--grid-line) 1px, transparent 1px),
                    linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
                background-size: 40px 40px;
            }
        }
        .dot-matrix {
            background-image: radial-gradient(rgba(244, 209, 37, 0.1) 1px, transparent 0);
            background-size: 3px 3px;
        }
        .pixel-border-sm {
            box-shadow: 
                0 -1px 0 0 #f4d125,
                0 1px 0 0 #f4d125,
                -1px 0 0 0 #f4d125,
                1px 0 0 0 #f4d125;
        }
        .word-cloud-mask {
            mask-image: radial-gradient(circle, black 70%, transparent 100%);
        }
        .neon-glow-blue {
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        .neon-glow-yellow {
            text-shadow: 0 0 10px rgba(244, 209, 37, 0.5);
        }
    </style>
</head>
<body class="min-h-screen selection:bg-primary selection:text-background-dark">
<header class="sticky top-0 z-50 border-b-2 border-primary/20 bg-background-dark/95 backdrop-blur-md">
<div class="max-w-[1440px] mx-auto flex items-center justify-between px-6 py-3">
<div class="flex items-center gap-10">
<div class="flex items-center gap-4 group cursor-pointer">
<div class="relative size-10 bg-background-dark border-2 border-primary flex items-center justify-center overflow-hidden">
<div class="absolute inset-0 opacity-20 dot-matrix"></div>
<div class="absolute inset-0 flex items-center justify-center opacity-40">
<span class="material-symbols-outlined text-primary text-3xl">crossword</span>
</div>
<span class="font-pixel text-xl font-bold text-primary relative z-10 leading-none">CH</span>
</div>
<div>
<h1 class="text-xl font-black tracking-tighter uppercase font-display leading-none">
                        Critical Hit <span class="text-primary">!</span>
</h1>
<div class="flex items-center gap-2 mt-1">
<span class="text-[8px] text-primary/60 font-bold tracking-[0.4em] font-pixel">SECRET_BASE_INTEL</span>
<span class="size-1 bg-new-blue animate-pulse"></span>
</div>
</div>
</div>
<div class="hidden md:flex flex-col border-l border-white/10 pl-10">
<span class="text-primary text-[10px] font-bold tracking-[0.2em] font-pixel uppercase">Filtered Intelligence Stream</span>
<span class="text-[8px] opacity-40 font-mono">CONNECTION: ENCRYPTED // STATUS: OPTIMAL</span>
</div>
</div>
<div class="flex items-center gap-8">
<button class="flex items-center gap-3 px-4 py-2 bg-white/5 border border-white/10 hover:border-primary/60 hover:bg-primary/5 transition-all group">
<span class="material-symbols-outlined text-primary text-lg leading-none group-hover:scale-110 transition-transform">headset_mic</span>
<span class="text-[10px] font-pixel text-primary tracking-widest pt-0.5">AI音楽を聴く</span>
</button>
<nav class="hidden lg:flex items-center gap-8 text-[10px] font-black tracking-[0.3em] uppercase font-pixel">
<a class="text-primary border-b border-primary pb-1" href="#">Archive</a>
<a class="text-white/40 hover:text-white transition-colors" href="#">Terminal</a>
</nav>
<button class="bg-primary text-background-dark px-5 py-2 font-bold text-[10px] uppercase font-pixel tracking-tighter hover:brightness-110 active:scale-95 transition-all">
                Access_Key
            </button>
</div>
</div>
</header>
<main class="max-w-[1440px] mx-auto px-6 py-8 space-y-12">
<section class="bg-panel-dark border border-white/5 relative overflow-hidden group">
<div class="absolute top-0 right-0 p-4 opacity-5 dot-matrix w-full h-full pointer-events-none"></div>
<div class="p-6 border-b border-white/5 flex flex-col md:flex-row md:items-center justify-between gap-6">
<div>
<h2 class="text-xs font-bold text-primary tracking-[0.4em] uppercase mb-4 flex items-center gap-2 font-pixel">
<span class="material-symbols-outlined text-sm">hub</span> トレンド・マップ
                </h2>
<div class="flex flex-wrap gap-2">
<button class="px-3 py-1 bg-primary text-background-dark text-[9px] font-pixel tracking-tighter">全て</button>
<button class="px-3 py-1 bg-white/5 border border-white/10 text-[9px] font-pixel text-white/60 hover:border-primary/50 transition-colors">社会</button>
<button class="px-3 py-1 bg-white/5 border border-white/10 text-[9px] font-pixel text-white/60 hover:border-primary/50 transition-colors">経済</button>
<button class="px-3 py-1 bg-background-dark border border-new-blue/50 text-new-blue text-[9px] font-pixel shadow-[0_0_8px_rgba(59,130,246,0.3)]">テクノロジー</button>
<button class="px-3 py-1 bg-white/5 border border-white/10 text-[9px] font-pixel text-white/60 hover:border-primary/50 transition-colors">エンタメ</button>
</div>
</div>
<div class="bg-background-dark p-3 border border-white/10 flex gap-6 items-center">
<div class="flex items-center gap-2">
<span class="size-2 bg-rising-yellow shadow-[0_0_5px_#f4d125]"></span>
<span class="text-[9px] font-pixel text-primary uppercase">Rising / 上昇</span>
</div>
<div class="flex items-center gap-2">
<span class="size-2 bg-new-blue shadow-[0_0_5px_#3b82f6]"></span>
<span class="text-[9px] font-pixel text-new-blue uppercase">New / 新規</span>
</div>
<div class="flex items-center gap-2">
<span class="size-2 bg-stable-white border border-white/20"></span>
<span class="text-[9px] font-pixel text-stable-white uppercase opacity-60">Stable / 安定</span>
</div>
</div>
</div>
<div class="relative h-[320px] bg-black/40 overflow-hidden word-cloud-mask">
<div id="ch-wordcloud" class="absolute inset-0 flex flex-wrap items-center justify-center content-center gap-x-12 gap-y-6 opacity-80 blur-0 pointer-events-none"></div>

</div>
</section>
<div class="grid grid-cols-1 lg:grid-cols-12 gap-10">
<div class="lg:col-span-8 space-y-12">
<section>
<div class="flex items-center justify-between mb-8 border-l-4 border-primary pl-4">
<h3 class="text-lg font-black tracking-widest flex items-center gap-3 font-pixel">
<span class="material-symbols-outlined text-primary">database</span>
                        深掘りインテリジェンス
                    </h3>
<a class="text-[10px] font-pixel text-primary hover:underline tracking-widest uppercase opacity-60" href="#">FETCH_ALL_DATA</a>
</div>
<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
<div class="group cursor-pointer bg-panel-dark border border-white/5 hover:border-new-blue/30 transition-all flex flex-col h-full relative overflow-hidden">
<div class="aspect-video relative overflow-hidden bg-black">
<img class="w-full h-full object-cover grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-700" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBJ53oT1_WljcRWmvuVqewLQJOFuizdGdS6ejFp0TfwHXT9CYBxRbN7QAJ6duec1bzeSzCny9UrJAz7gjyMyN4RzPlfGQzd_3b6vkpdxPoVjA75vigeG1t3FJPzJgQKC7nhv3hFyyZPR1qJ1c5VeY3MN0EU4AbSiMIYzRuEg7RXBwl71N073laB_PjdycMgi4sWcCiOtermOx_qjXpc3omFrRDrNx-Glj8qECGjvQm-zDEq_zu_T5H72EfCkQ3f9xXxfBZnGjfdU1I"/>
<div class="absolute inset-0 bg-gradient-to-t from-panel-dark to-transparent"></div>
<div class="absolute bottom-4 left-4 bg-primary text-background-dark text-[9px] font-pixel px-2 py-0.5 uppercase">TECH_ANALYSIS</div>
</div>
<div class="p-6 flex-grow border-t border-white/5">
<h4 class="text-lg font-bold group-hover:text-primary transition-colors leading-tight mb-4">半導体自給率の争奪戦：グローバル・ファブ独立の現状</h4>
<p class="text-xs opacity-60 leading-relaxed line-clamp-2 mb-6 font-light">地政学リスクの高まりを受け、各国が国内生産回帰を加速。次世代プロセスを巡る巨額補助金の行方とサプライチェーンの再編を詳細に分析。</p>
<div class="flex items-center justify-between mt-auto">
<div class="flex items-center gap-3 opacity-40 text-[9px] font-mono">
<span class="tracking-widest">12_MIN_READ</span>
<span>//</span>
<span class="text-new-blue">REUTERS_INTEL</span>
</div>
<span class="material-symbols-outlined text-primary opacity-0 group-hover:opacity-100 transition-all -translate-x-4 group-hover:translate-x-0">chevron_right</span>
</div>
</div>
</div>
<div class="group cursor-pointer bg-panel-dark border border-white/5 hover:border-new-blue/30 transition-all flex flex-col h-full relative overflow-hidden">
<div class="aspect-video relative overflow-hidden bg-black">
<img class="w-full h-full object-cover grayscale opacity-60 group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-700" src="https://lh3.googleusercontent.com/aida-public/AB6AXuBKXJmXGE0Y9LNQwKQ6gS9X5LLkPR-kbpueADB2gs79JHUkOKtMw-ecJFsrhMtoBH9AJFUVOPPb-EBKjkIwJxwjChN2Lbju-8elwqnROc0_V8UEU4Wi3CO12yb6trKfGS2dydxRORfTjQOHYPNMuEl_Bv6y2pqw5YO__fsiMKPi0ADJwyok9DAODM3x7bmLdC1VnFV5X6Z3MRAlgmnBk4E5b7syLPhtDceNLMd2rhqLmJArhvJUDCfEhE0CcUyGMlump7TvrhATsUo"/>
<div class="absolute inset-0 bg-gradient-to-t from-panel-dark to-transparent"></div>
<div class="absolute bottom-4 left-4 bg-new-blue text-white text-[9px] font-pixel px-2 py-0.5 uppercase">ECON_INSIGHT</div>
</div>
<div class="p-6 flex-grow border-t border-white/5">
<h4 class="text-lg font-bold group-hover:text-new-blue transition-colors leading-tight mb-4">プログラム可能通貨：CBDCが再定義する金融政策の未来</h4>
<p class="text-xs opacity-60 leading-relaxed line-clamp-2 mb-6 font-light">中央銀行デジタル通貨(CBDC)の導入は、決済の効率化だけでなく、通貨の「プログラム可能性」による精密な経済制御を可能にする。</p>
<div class="flex items-center justify-between mt-auto">
<div class="flex items-center gap-3 opacity-40 text-[9px] font-mono">
<span class="tracking-widest">08_MIN_READ</span>
<span>//</span>
<span class="text-new-blue">FT_INSIGHTS</span>
</div>
<span class="material-symbols-outlined text-new-blue opacity-0 group-hover:opacity-100 transition-all -translate-x-4 group-hover:translate-x-0">chevron_right</span>
</div>
</div>
</div>
</div>
</section>
<section class="bg-primary/5 border border-primary/20 p-8 relative">
<div class="absolute inset-0 dot-matrix opacity-10 pointer-events-none"></div>
<div class="flex items-center gap-3 mb-8 border-b border-primary/20 pb-4">
<span class="material-symbols-outlined text-primary">analytics</span>
<h3 class="text-lg font-pixel tracking-[0.2em] uppercase text-primary">トレンド要約解説: AI国際規制</h3>
</div>
<div class="grid grid-cols-1 md:grid-cols-3 gap-8 relative z-10">
<div class="col-span-1 md:col-span-2 space-y-6">
<p class="text-xl font-bold leading-snug">主要国が合意した「AI階層的リスク管理」の全貌</p>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
<div class="bg-background-dark p-4 border-l-2 border-primary">
<span class="text-[9px] font-pixel text-primary uppercase block mb-2">背景と事実</span>
<p class="text-xs opacity-80 leading-relaxed">一定以上の演算能力を持つLLMに対し、透明性レポートと脆弱性評価の義務化が決定。特に医療・インフラ分野のAI活用に厳格なガイドラインが適用される。</p>
</div>
<div class="bg-background-dark p-4 border-l-2 border-new-blue">
<span class="text-[9px] font-pixel text-new-blue uppercase block mb-2">市場への影響</span>
<p class="text-xs opacity-80 leading-relaxed">法的リスクが明確化したことで、逆にエンタープライズ層のAI導入が加速。コンプライアンス関連のスタートアップに巨額の資金が流入中。</p>
</div>
</div>
</div>
<div class="bg-black/40 p-5 border border-white/5 h-fit">
<h4 class="text-[10px] font-pixel text-white/40 uppercase tracking-widest mb-4">信頼ソース</h4>
<ul class="space-y-3">
<li><a class="text-[11px] font-pixel text-primary hover:underline flex items-center gap-2" href="#">
<span class="material-symbols-outlined text-xs">link</span> REUTERS_INTEL
                            </a></li>
<li><a class="text-[11px] font-pixel text-primary hover:underline flex items-center gap-2" href="#">
<span class="material-symbols-outlined text-xs">link</span> NIKKEI_TECH
                            </a></li>
<li><a class="text-[11px] font-pixel text-primary hover:underline flex items-center gap-2" href="#">
<span class="material-symbols-outlined text-xs">link</span> WIRED_PRO
                            </a></li>
</ul>
</div>
</div>
</section>
</div>
<aside class="lg:col-span-4 space-y-8">
<div class="bg-panel-dark border border-white/10 p-6 sticky top-28">
<div class="flex items-center justify-between mb-8 border-b border-white/5 pb-4">
<h3 class="text-xs font-pixel tracking-widest uppercase flex items-center gap-2">
<span class="material-symbols-outlined text-primary text-sm">bookmark</span> Editor's Pick
                    </h3>
<span class="text-[8px] font-mono opacity-40">24H_GLOBAL_FILTER</span>
</div>
<div class="space-y-8">
<div class="group cursor-pointer">
<div class="aspect-[21/9] bg-black border border-white/5 overflow-hidden mb-3 relative">
<img class="w-full h-full object-cover opacity-40 grayscale group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-500" src="https://lh3.googleusercontent.com/aida-public/AB6AXuDe1J7s2vVCJ6s6HwO5kiU3Jq2ENXti1JXPUIk-mqaJfrcrQvzBC4sup6y5WGBdOYBTRjh-eg3R0arbvnArnej49WrqnnMefAGtNv23hTv2KrYWw_L2fkfi-NGgH46thudwOZOWkOSV33w_qs3WmuFShQNFY2fBPmnNPw6h9raKnuCZH5H3XAkiZvz_9FZV0JCtkCOisAkKQdUXm9OjeDD0tKCqFqLKfaME3_KECBTTEKj7IFn_g63VtLkUcnKXHZfOQ_sms4whM4U"/>
<div class="absolute inset-0 bg-primary/5 group-hover:bg-transparent"></div>
</div>
<span class="text-[9px] font-pixel text-primary tracking-tighter block mb-1">CYBER_DEFENSE</span>
<h5 class="text-sm font-bold leading-tight group-hover:text-primary transition-colors">AI駆動型攻撃への防御戦略：シンギュラリティへの備え</h5>
<p class="text-[9px] opacity-40 mt-2 font-mono uppercase">15 MIN READ • WIRED PRO</p>
</div>
<div class="group cursor-pointer">
<div class="aspect-[21/9] bg-black border border-white/5 overflow-hidden mb-3 relative">
<img class="w-full h-full object-cover opacity-40 grayscale group-hover:grayscale-0 group-hover:opacity-100 transition-all duration-500" src="https://lh3.googleusercontent.com/aida-public/AB6AXuAz4cTQuUDcYU2iIwgLLsTlDtIvEUHC6vVPiIiLXj8x2DJbgny9SZdL1IT3SKambBDzH-cuWvyQJdM4YOuioa7ifok0tSE91Nv-tuyplWCKewQa-GmVPR8LUeFGizVcNE_9pxDKJ9ZsDefxO8EZKzy3GrSX03RDFVPwaQHV4SILUkyVycd1zxRRBMCH9MB8t7iFYii2COuczgO3O1rMjZMZAidlZsuWc9o7O6SMmiPejDCXWHe3A70G5hMCZEfakrwHt8FGFUisqcc"/>
<div class="absolute inset-0 bg-new-blue/5 group-hover:bg-transparent"></div>
</div>
<span class="text-[9px] font-pixel text-new-blue tracking-tighter block mb-1">GLOBAL_LOGISTICS</span>
<h5 class="text-sm font-bold leading-tight group-hover:text-new-blue transition-colors">新興国市場におけるインフラ投資の新たな波と勝機</h5>
<p class="text-[9px] opacity-40 mt-2 font-mono uppercase">10 MIN READ • ANALYSIS</p>
</div>
<div class="group cursor-pointer flex gap-4 items-start border-t border-white/5 pt-6">
<div class="size-12 bg-primary/10 border border-primary/20 shrink-0 flex items-center justify-center">
<span class="material-symbols-outlined text-primary text-xl">bolt</span>
</div>
<div>
<h5 class="text-[13px] font-bold leading-tight group-hover:text-primary transition-colors mb-1">高速意思決定のための3つのフレームワーク</h5>
<span class="text-[8px] font-pixel opacity-40">TUTORIAL // 05_MIN</span>
</div>
</div>
</div>
<button class="w-full mt-10 py-3 text-[10px] font-pixel border border-primary/20 hover:border-primary hover:bg-primary hover:text-background-dark transition-all tracking-[0.2em] uppercase">
                    More Intelligence
                </button>
</div>
<div class="p-6 bg-new-blue/5 border border-new-blue/20 relative overflow-hidden group">
<div class="absolute inset-0 dot-matrix opacity-10"></div>
<h3 class="text-[10px] font-pixel text-new-blue uppercase mb-4">System Update</h3>
<p class="text-xs font-bold leading-relaxed mb-4">データ解析アルゴリズムが v4.2 にアップデートされました。トレンド抽出の精度が15%向上。</p>
<div class="h-1 bg-white/10 w-full mb-2">
<div class="h-full bg-new-blue w-3/4 animate-pulse"></div>
</div>
<span class="text-[8px] font-mono opacity-40">OPTIMIZING_STREAMS...</span>
</div>
</aside>
</div>
</main>
<footer class="bg-black/80 border-t border-white/10 py-16 mt-20 relative overflow-hidden">
<div class="absolute inset-0 dot-matrix opacity-5 pointer-events-none"></div>
<div class="max-w-[1440px] mx-auto px-6 relative z-10">
<div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-16">
<div class="md:col-span-1">
<div class="flex items-center gap-3 mb-6">
<div class="size-8 bg-background-dark border border-primary flex items-center justify-center text-primary font-pixel text-sm">
                        CH
                    </div>
<h1 class="text-lg font-black tracking-tighter uppercase font-display">Critical Hit <span class="text-primary">!</span></h1>
</div>
<p class="text-xs opacity-40 mb-8 leading-relaxed font-pixel">ノイズを削ぎ落とし、即座に活用可能なビジネス・インテリジェンスを提供。現代の意思決定者のための高精度ダッシュボード。</p>
<div class="flex gap-4">
<a class="size-9 border border-white/10 flex items-center justify-center opacity-50 hover:opacity-100 hover:border-primary hover:text-primary transition-all" href="#"><span class="material-symbols-outlined text-lg">share</span></a>
<a class="size-9 border border-white/10 flex items-center justify-center opacity-50 hover:opacity-100 hover:border-primary hover:text-primary transition-all" href="#"><span class="material-symbols-outlined text-lg">rss_feed</span></a>
</div>
</div>
<div class="grid grid-cols-2 md:grid-cols-3 md:col-span-3 gap-8">
<div>
<h6 class="text-[10px] font-pixel uppercase tracking-[0.25em] mb-6 text-primary">Platform</h6>
<ul class="space-y-4 text-[11px] opacity-40 font-medium">
<li><a class="hover:text-primary transition-colors" href="#">運営会社</a></li>
<li><a class="hover:text-primary transition-colors" href="#">編集方針</a></li>
<li><a class="hover:text-primary transition-colors" href="#">広告掲載</a></li>
</ul>
</div>
<div>
<h6 class="text-[10px] font-pixel uppercase tracking-[0.25em] mb-6 text-primary">Legal</h6>
<ul class="space-y-4 text-[11px] opacity-40 font-medium">
<li><a class="hover:text-primary transition-colors" href="#">プライバシーポリシー</a></li>
<li><a class="hover:text-primary transition-colors" href="#">利用規約</a></li>
</ul>
</div>
<div class="col-span-2 md:col-span-1 bg-white/5 p-6 border border-white/10 relative">
<div class="absolute top-0 right-0 p-2 opacity-10"><span class="material-symbols-outlined text-2xl">verified_user</span></div>
<h6 class="text-[10px] font-pixel uppercase tracking-[0.25em] mb-4 text-primary flex items-center gap-2">
<span class="material-symbols-outlined text-[14px]">security</span> Data Integrity
                    </h6>
<p class="text-[10px] opacity-50 leading-relaxed italic">「すべての解説は検証済み一次データに基づいています。バイアスを最小化した分析を保証します。」</p>
</div>
</div>
</div>
<div class="flex flex-col md:flex-row justify-between items-center pt-8 border-t border-white/5 gap-6">
<p class="text-[9px] opacity-30 font-mono tracking-[0.3em] uppercase">© 2024 CRITICAL HIT INTEL AGENCY. ALL_RIGHTS_RESERVED.</p>
<div class="flex gap-8 text-[9px] opacity-30 font-mono tracking-widest uppercase">
<span>LOCAL: 127.0.0.1</span>
<span class="text-new-blue">SYNC_OK</span>
</div>
</div>
</div>
</footer>
<script>
(async function () {
  try {
    // JSON読み込み
    const response = await fetch('data/today.json', { cache: 'no-store' });
    if (!response.ok) throw new Error('today.json を読めません: ' + response.status);
    const data = await response.json();

    // ===== 1) ワードクラウド（デザイン内）に流し込む =====
    // ▼あなたのHTML側で、ダミーのワード群を入れていた div を
    //    <div id="ch-wordcloud" class="..."> に置き換えておく必要があります。
    const wc = document.getElementById('ch-wordcloud');
    if (wc && Array.isArray(data.trend_words)) {
      wc.innerHTML = data.trend_words.map(t => {
        const score = Number(t.score ?? 0);

        // サイズ：scoreで5段階
        const sizeClass =
          score >= 90 ? 'text-4xl font-black' :
          score >= 75 ? 'text-3xl font-bold' :
          score >= 60 ? 'text-2xl font-semibold' :
          score >= 45 ? 'text-lg font-medium' :
                        'text-base font-light';

        // 色：deltaで分岐（up / steady / down / new も許容）
        const delta = (t.delta || 'steady').toLowerCase();
        const colorClass =
          delta === 'up' || delta === 'rising' ? 'text-primary neon-glow-yellow' :
          delta === 'new' ? 'text-new-blue neon-glow-blue' :
          delta === 'down' ? 'text-new-blue neon-glow-blue' :
                             'text-stable-white opacity-70';

        const word = (t.word || '').toString().trim();
        if (!word) return '';

        return `<span class="${sizeClass} ${colorClass} font-display uppercase">${escapeHtml(word)}</span>`;
      }).join('');
    }

    // ===== 2) （任意）右側の Related Intelligence を差し替える場合 =====
    // まずはワードクラウドだけでOK。将来ここも差し替えるなら
    // HTML側に id="ch-related" の箱を作って、下を有効化します。
    //
    // const related = document.getElementById('ch-related');
    // if (related && Array.isArray(data.explains)) {
    //   related.innerHTML = data.explains.slice(0,3).map(e => {
    //     const src = (e.sources && e.sources[0]) ? e.sources[0] : null;
    //     const srcHtml = src
    //       ? `<a class="underline text-primary" href="${src.url}" target="_blank" rel="noopener noreferrer">${escapeHtml(src.label || '出典')}</a>`
    //       : `<span class="opacity-50">出典（要追加）</span>`;
    //     return `
    //       <div class="group cursor-pointer ${/*必要ならクラス調整*/''}">
    //         <h4 class="text-[11px] font-bold leading-tight group-hover:text-primary transition-colors line-clamp-2">
    //           ${escapeHtml(e.title || '')}
    //         </h4>
    //         <div class="mt-2 text-[10px] opacity-60">${escapeHtml(e.what || '')}</div>
    //         <div class="mt-2 text-[10px]">${srcHtml}</div>
    //       </div>
    //     `;
    //   }).join('');
    // }

  } catch (err) {
    console.error(err);
  }

  // HTMLエスケープ（安全対策）
  function escapeHtml(str) {
    return String(str)
      .replaceAll('&', '&amp;')
      .replaceAll('<', '&lt;')
      .replaceAll('>', '&gt;')
      .replaceAll('"', '&quot;')
      .replaceAll("'", '&#39;');
  }
})();
</script>
</body></html>
